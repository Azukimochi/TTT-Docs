---
sidebar_position: 4
---


# SimpleDecal

## 概要

テクスチャを平行に投影したかのように見えるテクスチャを生成し色合成をしながらテクスチャ改変を行う  
[AtlasTexture](/docs/Reference/AtlasTexture)の為に作られた UVtoUV の技術を転用して作られたコンポーネント。

## デカールが張られる基準

- 適切なレンダラーが一つ以上指定されていること [詳細](#レンダラー設定)
- ギズモの範囲にポリゴンが存在すること [詳細](#カリング設定)
- 対象となるレンダラーが持つマテリアルに [ターゲットプロパティネーム](#ターゲットプロパティネーム)で指定されるテクスチャーが存在すること

## 設定項目

### レンダラー設定

基本的に対象とるレンダラー (SkindMeshRenderer or MeshRenderer) を入れる項目。

シングルレンダラーモード  
![SingleRendererMode](../img/sd-SingleRendererMode.png)  
マルチレンダラーモード  
![MultiRendererMode](../img/sd-MultiRendererMode.png)  

基本的にマルチレンダラーモードはそれらに対して foreach しているだけのもので、適用したい対象が複数のレンダラーに分かれている場合に使用することを想定しています。

### テクスチャー設定

![TextureSetting](../img/sd-TextureSetting.png)

#### デカールテクスチャー

張り付けるテクスチャーそのもの。

#### カラー

貼り付けるとき、デカールテクスチャーに対して乗算して、貼り付けるときに色を変えることができる。

#### ブレンドタイプキー

デカールを元のテクスチャと合成するときの色合成を指定できるキー。[詳細](/docs/Reference/Common/BlendTypeKey)

#### ターゲットプロパティネーム

デカールを張るテクスチャの選択。 [詳細](/docs/Reference/Common/TargetPropertyName.md)

### スケール設定

![ScaleSetting-AspectFixed](../img/sd-ScaleSetting-AspectFixed.png)

#### スケール

ローカルスケール の X ( Y) の値で、デカールを張る 横幅(と縦幅)に対応しています。

#### アスペクト比固定

有効だと画像のアスペクト比に応じて 縦幅 の値を自動設定します。

アスペクト非固定無効化したUI  
![ScaleSetting-NonAspectFixed](../img/sd-ScaleSetting-NonAspectFixed.png)

#### 最大距離

ローカルスケールの Z の値で、デカールが張られる大体の奥行きと対応しています。

### カリング設定

![CullingSetting](../img/sd-CullingSetting.png)

#### ポリゴンカリング

処理を軽くするために行うポリゴンのカリング。

相当メッシュに対して小さいデカールを張らない限りいじる必要はないため、Vartex 推奨

#### サイドカリング

有効だとデカールする方向から見て裏面となるポリゴンにはデカールが張られなくなります。
:::info
スケールの一部がマイナスになっているとデカールする方向から見て表面に張られなくなることがあります。
:::

### 詳細設定

![AdvansdSetting](../img/sd-AdvansdSetting.png)

#### 高品質なパディング

通常パディングはとてもギザギザしたパディングになっていて、それをパディングを高品質で生成するオプションです。  
高負荷でアバターのビルド時間の増加を招くので必要がなければ使わないほうが良いです。

#### パディング

MipMapでにじまないようにするためのパディングの幅です。

### 実験的機能

:::warning
これらは実験的機能で予告なく削除や変更が行われる可能性があります。
:::

#### アイランドカリング

UV上でつながるまとまりごとにデカールをマスクするようにカリングする機能  
アイランドセレクター位置の X & Y と アイランドセレクター最大距離でレイを調整し、どのまとまりでカリングするかを選択することで使えます。

:::info
アイランドカリングは今後大幅に使いやすくする目的で書き換えられる可能性が高く、互換性を保てない可能性が高いため実験的機能としてマークされています。
:::

#### 深度デカール

デカールを張る方向から一番手毎の部分にのみデカールが張られるようにできる機能

##### 深度反転

深度判定を反転し、"一番手前だけ"を"後ろ側になった場所すべて"にします。

:::info
深度デカールは技術そのものが安定していないため実験的機能としてマークされています。
:::

## よくある Q & A

### 影色にデカールが適用されない & エミッションにもデカールを適用したい

デフォルト設定ではSimpleDecalは "_MainTex" にデカールを適用します。  
前者の場合lilToonであれば 影色1のテクスチャー "_ShadowColorTex" などが存在し、それらに "_MainTex" とは違うテクスチャーが入っているようなマテリアルで発生し、それにもデカールを適用することで解決できます。

具体的にはデカールを複製し、[ターゲットプロパティネーム](/docs/Reference/Common/TargetPropertyName.md)で該当するテクスチャーのプロパティを選択すること。
![Q&A-ShadowDecal](../img/sd-Q&A-ShadowDecal.png)

後者のエミッションの場合でも、エミッション用のプロパティを選択することで解決できますが、該当となるプロパティにテクスチャーが割り当てられていない場合適用されないのでご注意ください。
